!function(e){function t(t){for(var a,r,c=t[0],i=t[1],l=t[2],u=0,m=[];u<c.length;u++)r=c[u],o[r]&&m.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(d&&d(t);m.length;)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={1:0},o={1:0},s=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{3:1}[e]&&t.push(r[e]=new Promise(function(t,n){for(var a=({}[e]||e)+"."+{3:"acf27bb15141925b9005",4:"944a4bb4d7843137023f",5:"7059a941b1fe81c7ee0e"}[e]+".css",o=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=(d=s[i]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===a||l===o))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){var d;if((l=(d=u[i]).getAttribute("data-href"))===a||l===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.request=a,delete r[e],m.parentNode.removeChild(m),n(s)},m.href=o,document.getElementsByTagName("head")[0].appendChild(m)}).then(function(){r[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=o[e]=[t,a]});t.push(n[2]=a);var s,i=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=function(e){return c.p+""+({}[e]||e)+"."+{3:"acf27bb15141925b9005",4:"944a4bb4d7843137023f",5:"7059a941b1fe81c7ee0e"}[e]+".js"}(e),s=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");s.type=a,s.request=r,n[1](s)}o[e]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,i.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/public/",c.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;s.push([245,0]),n()}({13:function(e,t,n){"use strict";var a=n(11),r=n.n(a),o=n(12),s=n.n(o),c="https:"===location.protocol?"wss":"ws",i=new WebSocket("".concat(c,"://").concat(location.host,"/_ws")),l=new(function(){function e(){r()(this,e),this.events=new Map}return s()(e,[{key:"on",value:function(e,t){this.events.set(e,t)}},{key:"emit",value:function(e,t){this.events.forEach(function(n,a){a===e&&n(t)})}}]),e}());i.onmessage=function(e){var t=JSON.parse(e.data),n=t.event,a=t.data;l.emit(n,a)},t.a=l},157:function(e,t,n){var a={"./af":26,"./af.js":26,"./ar":27,"./ar-dz":28,"./ar-dz.js":28,"./ar-kw":29,"./ar-kw.js":29,"./ar-ly":30,"./ar-ly.js":30,"./ar-ma":31,"./ar-ma.js":31,"./ar-sa":32,"./ar-sa.js":32,"./ar-tn":33,"./ar-tn.js":33,"./ar.js":27,"./az":34,"./az.js":34,"./be":35,"./be.js":35,"./bg":36,"./bg.js":36,"./bm":37,"./bm.js":37,"./bn":38,"./bn.js":38,"./bo":39,"./bo.js":39,"./br":40,"./br.js":40,"./bs":41,"./bs.js":41,"./ca":42,"./ca.js":42,"./cs":43,"./cs.js":43,"./cv":44,"./cv.js":44,"./cy":45,"./cy.js":45,"./da":46,"./da.js":46,"./de":47,"./de-at":48,"./de-at.js":48,"./de-ch":49,"./de-ch.js":49,"./de.js":47,"./dv":50,"./dv.js":50,"./el":51,"./el.js":51,"./en-au":52,"./en-au.js":52,"./en-ca":53,"./en-ca.js":53,"./en-gb":54,"./en-gb.js":54,"./en-ie":55,"./en-ie.js":55,"./en-il":56,"./en-il.js":56,"./en-nz":57,"./en-nz.js":57,"./eo":58,"./eo.js":58,"./es":59,"./es-do":60,"./es-do.js":60,"./es-us":61,"./es-us.js":61,"./es.js":59,"./et":62,"./et.js":62,"./eu":63,"./eu.js":63,"./fa":64,"./fa.js":64,"./fi":65,"./fi.js":65,"./fo":66,"./fo.js":66,"./fr":67,"./fr-ca":68,"./fr-ca.js":68,"./fr-ch":69,"./fr-ch.js":69,"./fr.js":67,"./fy":70,"./fy.js":70,"./gd":71,"./gd.js":71,"./gl":72,"./gl.js":72,"./gom-latn":73,"./gom-latn.js":73,"./gu":74,"./gu.js":74,"./he":75,"./he.js":75,"./hi":76,"./hi.js":76,"./hr":77,"./hr.js":77,"./hu":78,"./hu.js":78,"./hy-am":79,"./hy-am.js":79,"./id":80,"./id.js":80,"./is":81,"./is.js":81,"./it":82,"./it.js":82,"./ja":83,"./ja.js":83,"./jv":84,"./jv.js":84,"./ka":85,"./ka.js":85,"./kk":86,"./kk.js":86,"./km":87,"./km.js":87,"./kn":88,"./kn.js":88,"./ko":89,"./ko.js":89,"./ky":90,"./ky.js":90,"./lb":91,"./lb.js":91,"./lo":92,"./lo.js":92,"./lt":93,"./lt.js":93,"./lv":94,"./lv.js":94,"./me":95,"./me.js":95,"./mi":96,"./mi.js":96,"./mk":97,"./mk.js":97,"./ml":98,"./ml.js":98,"./mr":99,"./mr.js":99,"./ms":100,"./ms-my":101,"./ms-my.js":101,"./ms.js":100,"./mt":102,"./mt.js":102,"./my":103,"./my.js":103,"./nb":104,"./nb.js":104,"./ne":105,"./ne.js":105,"./nl":106,"./nl-be":107,"./nl-be.js":107,"./nl.js":106,"./nn":108,"./nn.js":108,"./pa-in":109,"./pa-in.js":109,"./pl":110,"./pl.js":110,"./pt":111,"./pt-br":112,"./pt-br.js":112,"./pt.js":111,"./ro":113,"./ro.js":113,"./ru":114,"./ru.js":114,"./sd":115,"./sd.js":115,"./se":116,"./se.js":116,"./si":117,"./si.js":117,"./sk":118,"./sk.js":118,"./sl":119,"./sl.js":119,"./sq":120,"./sq.js":120,"./sr":121,"./sr-cyrl":122,"./sr-cyrl.js":122,"./sr.js":121,"./ss":123,"./ss.js":123,"./sv":124,"./sv.js":124,"./sw":125,"./sw.js":125,"./ta":126,"./ta.js":126,"./te":127,"./te.js":127,"./tet":128,"./tet.js":128,"./tg":129,"./tg.js":129,"./th":130,"./th.js":130,"./tl-ph":131,"./tl-ph.js":131,"./tlh":132,"./tlh.js":132,"./tr":133,"./tr.js":133,"./tzl":134,"./tzl.js":134,"./tzm":135,"./tzm-latn":136,"./tzm-latn.js":136,"./tzm.js":135,"./ug-cn":137,"./ug-cn.js":137,"./uk":138,"./uk.js":138,"./ur":139,"./ur.js":139,"./uz":140,"./uz-latn":141,"./uz-latn.js":141,"./uz.js":140,"./vi":142,"./vi.js":142,"./x-pseudo":143,"./x-pseudo.js":143,"./yo":144,"./yo.js":144,"./zh-cn":145,"./zh-cn.js":145,"./zh-hk":146,"./zh-hk.js":146,"./zh-tw":147,"./zh-tw.js":147};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=157},172:function(e,t,n){},173:function(e,t){var n=new URLSearchParams(window.location.search).get("overlay"),a=document.querySelectorAll("button[data-box-overlay-id]");Array.from(a).forEach(function(e){var t=e.dataset.boxOverlayId,a=document.querySelector(".Overlay#".concat(t));if(a){var r=a.querySelector("iframe");e.addEventListener("click",i);var o=function(){e.setAttribute("aria-expanded",!1),a.setAttribute("hidden",!0),r&&r.contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo",args:""}),"*")},s=a.querySelector(".js-box-overlay-close");if(!s)throw new Error("No overlay close button found");window.addEventListener("keyup",function(e){"Escape"===e.code&&o()}),s.addEventListener("click",o);var c=a.querySelector("form");c&&!c.dataset.hasOwnProperty("disableClose")&&c.addEventListener("submit",o),n&&n===t&&i()}else console.warn("Overlay with id ".concat(t," not found"));function i(){var t="true"===e.getAttribute("aria-expanded")?"false":"true";e.setAttribute("aria-expanded",t),a.removeAttribute("hidden"),r&&r.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}})},174:function(e,t){var n=document.querySelector(".js-enable-notifications");n&&document.body.classList.contains("logged-in")&&(window.Notification&&"granted"!==Notification.permission?n.addEventListener("click",function(){return Notification.requestPermission(function(e){"granted"===e&&n.parentElement.removeChild(n)})}):n.parentElement.removeChild(n))},21:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(11),r=n.n(a),o=n(12),s=n.n(o),c=n(13),i=n(3),l=function(){function e(t,n){r()(this,e),this.loader=t,this.consl=n}return s()(e,[{key:"start",value:function(){var e=this;c.a.on("console-message",function(t){e.consl.classList.remove("d-none"),e.append(t)}),c.a.on("console-error",function(t){e.append(t)}),c.a.on("console-end",function(t){e.loader.deleteSelf(),e.append(t),Object(i.default)({style:t.success?"success":"error",body:t.message})})}},{key:"append",value:function(e){var t=e.time,n=e.message,a=e.color;a=a||"white";var r='<span class="text-gray-light mr-2">'.concat(t,"</span>"),o='<span class="text-'.concat(a,'">').concat(n,"</span>");this.consl.innerHTML+=r+o+"<br />"}}]),e}()},231:function(e,t){var n=document.querySelector(".js-org-select-menu"),a=document.querySelector(".js-org-select-overlay");function r(){n.removeAttribute("open"),a.style.display="none",a.removeEventListener("click",r)}n&&n.addEventListener("toggle",function(e){""===e.target.getAttribute("open")&&(a.style.display="block",a.addEventListener("click",r))})},232:function(e,t){var n=document.getElementById("eloquaForm");n&&n.addEventListener("submit",function(e){if(!1===n.checkValidity()){e.preventDefault(),e.stopPropagation();var t=Array.from(n.querySelectorAll("input, textarea")),a=t.filter(function(e){return e.checkValidity()}),r=t.filter(function(e){return!e.checkValidity()});a.forEach(function(e){return e.parentElement.parentElement.classList.remove("errored")}),r.forEach(function(e){return e.parentElement.parentElement.classList.add("errored")})}else document.getElementById("eloquaForm").submit();n.classList.add("validated")})},233:function(e,t){var n=document.querySelector(".js-upload-file-input");if(n){var a=document.querySelector(".js-upload-license-btn"),r=document.querySelector(".js-upload-license-file-name");n.addEventListener("change",function(e){var t=n.files[0].name;return r.textContent=t,r.style.display="block",a.removeAttribute("disabled")})}},243:function(e,t){document.querySelector(".js-reload-loop")&&setTimeout(function(){window.location.reload()},5e3)},245:function(e,t,n){"use strict";n.r(t);n(172);var a=n(9);window.onerror=function(e,t,n,r,o){fetch("/_needles",{method:"POST",body:JSON.stringify({message:e,source:t,lineno:n,colno:r,err:{name:o.name,stack:o.stack,message:o.message}}),headers:{"Content-Type":"application/json","CSRF-Token":Object(a.a)()}})};n(173);var r=n(8),o=n(3),s=n(163),c=n.n(s),i=n(13),l=document.querySelector(".js-register-form-wrapper"),u=document.querySelector(".js-registration-progress-steps");if(l){var d=l.querySelector(".js-register-form");if(d.addEventListener("submit",function(e){e.preventDefault();var t=c()(d,{hash:!0,empty:!0});u&&(l.style.display="none",u.style.display="block");var n=Object(r.a)();window.fetch("".concat(window.location.pathname,"/register"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":t._csrf},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){if(n.deleteSelf(),e.success)e.redirect?window.location.href=e.redirect:window.location.reload();else{Object(o.default)({style:"error",body:e.message});var t=document.querySelector('button[data-box-overlay-id="register-box-overlay"]'),a=document.querySelector(".Overlay#register-box-overlay");t.setAttribute("aria-expanded",!1),a.setAttribute("hidden",!0),u&&(l.style.display="block",u.style.display="none"),Array.from(document.querySelectorAll(".".concat("step--completed"))).forEach(function(e){return e.classList.remove("step--completed")});var r=document.querySelector(".".concat("step--current"));r&&r.classList.remove("step--current")}})}),u){var m=Array.from(u.querySelectorAll(".js-registration-progress-step"));i.a.on("registration-progress",function(e){var t=m.find(function(t){return t.dataset.step===e.step});if(t)switch(e.state){case"start":t.classList.add("step--current");break;case"done":t.classList.remove("step--current"),t.classList.add("step--completed")}})}}n(174);var p=n(2),f=n.n(p),h=n(4),v=n.n(h),b=n(1),y=n.n(b);i.a.on("step-completed",function(e){var t=e.step,n=e.nextStep,a=e.course,r=t.slug,o=t.dateCompleted,s=document.querySelector('.js-course-step[data-step="'.concat(r,'"]')),c=document.querySelector(".js-next-step"),i=document.querySelector(".js-course-progress");if(c)if(n){if(c.innerHTML=n.title,document.title="".concat(n.title," | ").concat(a.title," | GitHub Learning Lab"),window.Notification&&"denied"!==Notification.permission){var l=new Notification(n.title,{body:n.description,icon:"/public/images/avatar.png"});n.link&&l.addEventListener("click",function(){window.open(n.link,"_blank")})}if(i){var u=i.querySelector(".js-course-progress-current"),d=i.querySelector(".js-course-progress-max"),m=i.querySelector(".progress");u.textContent=t.order+1,m.style.width=100*(t.order+1/parseInt(d.textContent,10))}}else window.location.reload();if(s){var p=s.querySelector(".js-step-dateCompleted");if(p){var f=document.createElement("span");f.classList.add("f6","ml-2","lh-condensed","tooltipped","tooltipped-n"),f.dataset.ariaLabel=o,f.innerHTML="Completed ".concat(y()(o).fromNow()),p.appendChild(f)}s.classList.add("step--completed"),s.classList.remove("step--current"),s.nextElementSibling&&s.nextElementSibling.classList.add("step--current");var h=s.querySelector(".js-course-step-link-progress");h&&h.parentElement.removeChild(h)}});var g=document.querySelectorAll(".js-course-step-link-progress");Array.from(g).forEach(function(e){e.addEventListener("click",function(){var e=v()(f.a.mark(function e(t){var n,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.dataset,r=n.course,s=n.stepId,e.next=3,fetch("/".concat(r,"/progress/step/").concat(s),{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":Object(a.a)()}});case 3:e.sent.ok||Object(o.default)({style:"error",body:"An error occured and your step was not marked complete!"});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())});var E=document.querySelector(".Overlay#unregister-box-overlay form");if(E){var j=E.querySelector("input#should_delete_form"),x=E.querySelector('button[type="submit"]');j&&j.addEventListener("change",function(e){var t=e.target.checked;x.textContent=t?"Continue and delete ".concat(e.target.dataset.repo):"Continue"}),E.addEventListener("submit",function(e){e.preventDefault(),window.fetch("/".concat(e.target.dataset.course,"/unregister"),{method:"POST",credentials:"same-origin",body:JSON.stringify({shouldDelete:!!j&&j.checked}),headers:{"Content-Type":"application/json","CSRF-Token":Object(a.a)()}}).then(function(e){return e.json()}).then(function(e){e.success?window.location.reload():console.error(e.message)})})}var k=document.querySelector(".Overlay#renew-box-overlay form");k&&k.addEventListener("submit",function(e){var t=Object(r.a)();e.preventDefault(),window.fetch("/".concat(e.target.dataset.course,"/renew"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":Object(a.a)()}}).then(function(e){return e.json()}).then(function(e){if(t.deleteSelf(),e.success)window.location.reload();else{var n=e.message||"Something went wrong! Please try again later.";Object(o.default)({style:"error",body:n})}})});var S=n(14),w=n.n(S),N=document.querySelectorAll(".js-filter-course-item"),C=n(180);N.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t={encode:!1},n=e.target;if("A"!==e.target.tagName){var a=e.target.closest(".js-filter-course-item");if(!a)return;n=a}var r=n.textContent.trim(),o=C.parse(location.search).tag;if(o){var s=o.split(","),c=s.indexOf(r);if(-1===c)window.location.search=C.stringify({tag:"".concat(r,",").concat(o)},t);else{var i=[].concat(w()(s.slice(0,c)),w()(s.slice(c+1)));window.location.search=C.stringify({tag:i.join(",")},t)}}else window.location.search=C.stringify({tag:r},t)})});var O=n(10),A=n.n(O),q=n(19),L=n.n(q),T=["js-public-btn","js-private-btn"],F=document.querySelector(T.map(function(e){return".".concat(e)}).join());if(F){var R,P=F.classList.contains("js-public-btn")?"public":"private";F.addEventListener("click",function(e){if(confirm("Are you sure you want to change this course to ".concat(P,"?"))){var t=e.target.dataset,n=t.course,a=t.csrf;R=Object(r.a)(),fetch("/".concat(n,"/admin/toggle-private"),{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":a}}).then(function(e){return e.json()}).then(function(e){R.deleteSelf(),e.success?window.location.reload():Object(o.default)({style:"error",body:e.message})})}})}var z,D=document.querySelector(".js-course-publish-btn");D&&D.addEventListener("click",function(e){if(confirm("Are you sure you want to publish this course?")){var t=e.target.dataset.course;z=Object(r.a)(),fetch("/".concat(t,"/admin/publish"),{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(e){return e.json()}).then(function(e){z.deleteSelf(),e.success?window.location.reload():Object(o.default)({style:"error",body:e.message})})}});var M=["#79b8ff","#2188ff","#0366d6","#005cc5","#044289","#032f62","#05264c"],B=document.querySelector(".js-course-charts");if(B){var I=B.dataset.version.split(".")[0];L.a.defaults.global.defaultFontFamily="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",fetch(location.pathname+"/data",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){[["js-chart-course-steps-percentage","last 7 days",e.totals],["js-chart-course-steps-percentage-30","last 30 days",e.totals30],["js-chart-course-steps-percentage-all","all time",e.totalsAll]].forEach(function(e){var t=A()(e,3),n=t[0],a=t[1],r=t[2];L.a.Line(n,{type:"line",data:{labels:r.map(function(e){return e.title}),datasets:[{label:"Percentage",data:r.map(function(e){return e.percentage}),borderWidth:2,borderColor:M[3],pointBackgroundColor:M[3]},{label:"Count",data:r.map(function(e){return e.count}),showLine:!1,pointRadius:0,pointHitRadius:0}]},options:{tooltips:{mode:"index",position:"nearest"},legend:{display:!1},title:{text:"Step completion, ".concat(a,", major version ").concat(I),display:!0},scales:{yAxes:[{ticks:{min:0,max:100,callback:function(e){return"".concat(e,"%")}}}],xAxes:[{ticks:{autoSkip:!1,fontSize:12}}]}}})})})}var _=document.querySelector(".js-sync-template-repo-btn");_&&_.addEventListener("click",function(e){if(confirm("Are you sure you want to sync this template repository?")){var t=e.target.dataset.csrf,n=Object(r.a)();fetch(location.pathname+"/sync",{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":t}}).then(function(e){return e.json()}).then(function(e){n.deleteSelf(),Object(o.default)({style:e.success?"success":"error",body:e.message})})}});var W=document.querySelector(".js-delete-course-btn");W&&W.addEventListener("click",v()(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to delete this course? The GitHub repository will not be affected.")){e.next=2;break}return e.abrupt("return");case 2:return t=Object(r.a)(),e.next=5,fetch(location.pathname,{method:"DELETE",credentials:"same-origin",headers:{"CSRF-Token":Object(a.a)()}});case 5:n=e.sent,t.deleteSelf(),n.ok?window.location.assign("/"):(window.scrollTo(0,0),Object(o.default)({style:"error",message:"An unknown error has occurred and your course was not deleted."}));case 8:case"end":return e.stop()}},e)})));var U={fullWidth:!0,title:{display:!1},legend:{display:!1},scales:{yAxes:[{ticks:{display:!1},gridLines:{display:!1,drawBorder:!1}}],xAxes:[{ticks:{display:!1},gridLines:{display:!1,drawBorder:!1}}]},layout:{padding:5}};function J(e,t){if(t.length<5){var n=document.querySelector("#".concat(e)).parentElement,a=n.querySelector("canvas"),r=n.querySelector(".js-missing-data");a.style.display="none",r.style.display="block"}else{var o=t.map(function(e){return e.date}),s=t.map(function(e){return parseInt(e.totalcount,10)});L.a.Line(e,{type:"line",data:{labels:o,datasets:[{data:s,label:"Registrations",borderColor:"#0366d6",borderWidth:2}]},options:U})}}document.querySelectorAll(".js-org-dash-course-charts").length>0&&fetch(location.pathname+"/data",{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){e.forEach(function(e){var t="js-".concat(e.id,"-chart-registrations"),n="js-".concat(e.id,"-chart-registrations-completed");J(t,e.registrations),J(n,e.completedRegistrations)})});var H=document.querySelector(".js-org-lab-assistants-create");H&&H.addEventListener("click",function(){var e=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to create and enable a Lab Assistants team?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(location.pathname,{method:"POST",credentials:"same-origin",headers:{"CSRF-Token":Object(a.a)()}});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent).success?window.location.reload():Object(o.default)({style:"error",body:r.message});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var K=document.querySelector(".js-org-lab-assistants-enable");K&&K.addEventListener("click",function(){var e=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to enable this Lab Assistants team?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(location.pathname+"/enable",{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":Object(a.a)()}});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent).success?window.location.reload():Object(o.default)({style:"error",body:r.message});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var V=document.querySelector(".js-org-lab-assistants-disable");V&&V.addEventListener("click",function(){var e=v()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to disable this Lab Assistants team?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(location.pathname+"/disable",{method:"PUT",credentials:"same-origin",headers:{"CSRF-Token":Object(a.a)()}});case 4:return n=e.sent,e.next=7,n.json();case 7:(r=e.sent).success?window.location.reload():Object(o.default)({style:"error",body:r.message});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var Y=n(21),G=document.querySelector(".js-create-course-form"),Q=document.querySelector(".js-create-course-console");if(G){var X,Z=Array.from(G.querySelectorAll('.select-menu input[type="radio"]')),$=G.querySelector(".js-menu-target");Z.forEach(function(e){e.addEventListener("change",function(e){var t=e.target.value,n=e.target.parentElement.querySelector(".avatar").getAttribute("src");$.querySelector("span").textContent=t,$.querySelector("img").setAttribute("src",n),$.closest(".js-course-owner-select-menu").removeAttribute("open")})}),G.addEventListener("submit",function(){var e=v()(f.a.mark(function e(t){var n,a,s,c,i,l,u,d,m,p;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=G.querySelector('input[type="submit"]')).setAttribute("disabled",!0),a=G.querySelector("input#repo"),s=a.value,c=Z.find(function(e){return e.checked}).value,X=Object(r.a)(),i=new Y.a(X,Q),l={repo:s},(u=G.querySelector('input[name="visibility"]:checked'))&&(l.visibility=u.value),(d=G.querySelector('input[name="type"]:checked'))&&(l.type=d.value),m=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e.prev=13,e.next=16,fetch("/".concat(c,"/new"),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":m},body:JSON.stringify(l)}).then(function(e){return e.json()});case 16:p=e.sent,n.removeAttribute("disabled"),p.success?i.start():(X.deleteSelf(),Object(o.default)({style:"error",body:p.message})),e.next=27;break;case 21:e.prev=21,e.t0=e.catch(13),n.removeAttribute("disabled"),X.deleteSelf(),console.error(e.t0),Object(o.default)({style:"error",body:"Something unexpected has gone wrong."});case 27:case"end":return e.stop()}},e,null,[[13,21]])}));return function(t){return e.apply(this,arguments)}}())}var ee,te=document.querySelector(".js-sync-course-btn");te&&te.addEventListener("click",function(e){if(confirm("Are you sure you want to sync this course?")){var t=e.target.dataset,n=t.course,a=t.csrf;ee=Object(r.a)(),fetch("/courses/".concat(n,"/sync"),{method:"POST",credentials:"same-origin",headers:{"CSRF-Token":a}}).then(function(e){return e.json()}).then(function(e){e.success||Object(o.default)({style:"error",body:e.message})}),new Y.a(ee,document.querySelector(".js-create-course-console")).start()}});n(231),n(232),n(233);var ne=n(0),ae=n.n(ne),re=n(149),oe=n(153),se=n.n(oe),ce=n(17),ie=n.n(ce),le=n(11),ue=n.n(le),de=n(12),me=n.n(de),pe=n(164),fe=n.n(pe),he=n(165),ve=n.n(he),be=n(16),ye=n.n(be),ge=n(166),Ee=n.n(ge),je=n(23),xe=n.n(je),ke=n(6);function Se(e){var t,n=e.id,a=e.type,r=void 0===a?"text":a,o=e.label,s=e.name,c=e.value,i=e.placeholder,l=e.description,u=e.required,d=void 0!==u&&u;return"checkbox"===r?ae.a.createElement("div",{className:"form-checkbox"},ae.a.createElement("label",null,ae.a.createElement("input",{type:"checkbox",checked:c,name:s}),o),l&&ae.a.createElement("p",{className:"note mb-2 mt-0"},l)):(t="textarea"===r?ae.a.createElement("textarea",{className:"form-control width-full",id:n,name:s,value:c||"",placeholder:i||o,required:d}):ae.a.createElement("input",{className:"form-control width-full",id:n,type:r,name:s,value:c||"",placeholder:i||o,required:d}),ae.a.createElement("dl",{className:"form-group mt-0 ".concat(d?"required":"")},ae.a.createElement("dt",null,ae.a.createElement("label",{htmlFor:n,className:"d-block"},o||s)),l&&ae.a.createElement("p",{className:"note mb-2 mt-0"},l),ae.a.createElement("dd",null,t)))}var we=n(154),Ne=n.n(we);function Ce(e){var t=e.legend,n=e.description,a=e.children;return ae.a.createElement("fieldset",{className:"mb-3 p-3 rounded-1 border width-full"},ae.a.createElement("legend",{className:"text-bold pr-3 ml-n2 pl-2"},t),n&&ae.a.createElement("p",{className:"note mt-n2 mb-2"},n),a)}function Oe(e){var t,n=e.label,a=e.name,r=e.optionKey,o=e.value,s=e.description;return t=o&&"object"===Ne()(o)?Object.keys(o).map(function(e){return ae.a.createElement("dl",{key:e,className:"form-group mt-0 width-full"},ae.a.createElement("dt",null,ae.a.createElement("label",null,e)),ae.a.createElement("dd",null,ae.a.createElement("input",{name:"".concat(a,".").concat(e),className:"form-control width-full",type:"text",placeholder:"value",value:o[e]})))}):ae.a.createElement("pre",{className:"border border-gray-light rounded-1 p-3 bg-gray-light"},ae.a.createElement("code",null,r,":","\n  ","key: value")),ae.a.createElement(Ce,{legend:n||r,description:s},t)}function Ae(e){var t,n=e.name,a=e.description,r=e.label,o=e.value,s=e.optionKey;t=o&&Array.isArray(o)&&o.length?o.map(function(e,t){return ae.a.createElement("input",{className:"form-control width-full mb-1",key:t,type:"text",value:e,name:"".concat(n,".").concat(t)})}):ae.a.createElement("pre",{className:"border border-gray-light rounded-1 p-3 bg-gray-light"},ae.a.createElement("code",null,s,":","\n  ","- item"));var c="To add or remove items, update the YAML.";return a&&(c=a+" "+c),ae.a.createElement(Ce,{legend:r,description:c},t)}function qe(e){var t=e.label,n=e.required,a=e.name,r=e.description,o=e.value,s=e.options;return ae.a.createElement("dl",{className:"form-group mt-0 ".concat(n?"required":"")},ae.a.createElement("dt",null,ae.a.createElement("label",{className:"d-block"},t)),r&&ae.a.createElement("p",{className:"note mb-2 mt-0"},r),ae.a.createElement("dd",null,ae.a.createElement("select",{className:"form-select",key:a,label:t,name:a,value:o,description:r,required:n},s.map(function(e){return ae.a.createElement("option",{key:e},e)}))))}var Le=ae.a.createContext();function Te(e){var t=e.action,n=e.name,a=e.optionKey,r=e.option,o=e.value,s=e.openFile,c=e.addAction,i=e.removeAction,l=e.fetchSchema,u=e.error,d=e.stepIndex,m=r.metas&&r.metas[0].label||r.label||a;if("data"===a)return ae.a.createElement(Oe,{label:m,name:n,optionKey:a,value:o,description:r.description});var p=r.flags&&"required"===r.flags.presence,f=r.metas&&r.metas[0].isResponse;if("string"===r.type&&!r.valids&&!f||"alternatives"===r.type)return ae.a.createElement(Se,{label:m,name:n,value:o,description:r.description,required:p});if("string"===r.type&&(r.valids||f)){var h=Object(ne.useContext)(Le).tree,v=f?h.filter(function(e){return e.path.startsWith("responses/")}).map(function(e){return e.path.replace(/^responses\//,"")}):r.valids,b=ae.a.createElement(qe,{label:m,name:n,value:o,description:r.description,options:v,required:p});return f?ae.a.createElement(ae.a.Fragment,null,b,ae.a.createElement("button",{className:"btn-link text-small mb-3 d-block mt-n2",type:"button",onClick:function(){return s("responses/".concat(o))}},"Edit response file")):b}return"number"===r.type?ae.a.createElement(Se,{label:m,type:"number",name:n,value:o,description:r.description,required:p}):"boolean"===r.type?ae.a.createElement(Se,{label:m,type:"checkbox",name:n,checked:o,description:r.description,required:p}):"array"===r.type?"gate"===t.type&&"else"===a?ae.a.createElement(Be,{description:r.description,stepIndex:d,actions:o,addAction:c,removeAction:i,basename:n,legend:"Else actions",fetchSchema:l,error:u,openFile:s}):ae.a.createElement(Ae,{label:m,description:r.description,name:n,value:o,optionKey:a}):"object"===r.type?ae.a.createElement(Ce,{legend:m,description:r.description},Object.keys(r.keys).map(function(e){var a="".concat(n,".").concat(e),s=r.keys[e],c=o?o[e]:void 0;return ae.a.createElement(Te,{action:t,key:e,name:a,option:s,optionKey:e,value:c})})):(console.log(r.type),ae.a.createElement("span",null))}function Fe(e){var t=e.detail,n=t.context,a=t.message;return ae.a.createElement("div",null,ae.a.createElement("p",{className:"m-0"},a),n&&n.error&&n.error.details&&ae.a.createElement(Re,{isNested:!0,details:n.error.details}))}function Re(e){var t=e.details,n=e.isNested,a=void 0!==n&&n;return ae.a.createElement("ul",{className:"".concat(a?"pl-3":"list-style-none")},t.map(function(e,t){return ae.a.createElement("li",{key:"error-".concat(t),className:0!==t?"mt-3":""},!a&&ae.a.createElement("p",{className:"m-0 text-bold"},e.path.join(".")),ae.a.createElement(Fe,{detail:e}))}))}function Pe(e){var t=e.error;return t?t.details?ae.a.createElement("div",{className:"flash flash-error text-mono text-small mt-2"},ae.a.createElement(Re,{details:t.details})):ae.a.createElement("div",{className:"flash flash-error text-mono text-small mt-2"},ae.a.createElement("strong",{className:"d-block"},"There was an error while parsing the YAML code:"),t):null}function ze(e){var t=e.stepIndex,n=e.action,a=e.actionIndex,r=e.basename,o=e.open,s=void 0!==o&&o,c=e.addAction,i=e.removeAction,l=e.fetchSchema,u=e.error,d=e.openFile;if(!n||!n.type)return null;var m=Object(ne.useState)(null),p=A()(m,2),f=p[0],h=p[1],v=Object(ne.useState)(!0),b=A()(v,2),y=b[0],g=b[1];Object(ne.useEffect)(function(){l(n.type).then(function(e){h(e),g(!1)}).catch(function(){h(null),g(!1)})},[n.type]);var E=null;if(u&&u.details){var j=u.details.filter(function(e){return e.path.join(".")==="".concat(r,".").concat(a)});j.length&&(E=j.map(function(e,t){return ae.a.createElement("div",{key:t,className:"flash flash-error text-mono text-small mb-2 position-static"},ae.a.createElement(Re,{details:e.context.error.details}))}))}var x="d-block border rounded-1 border-gray-light bg-gray py-1 px-2 text-mono";if(y)return ae.a.createElement("span",{className:x},"Loading...");if(!y&&!f)return ae.a.createElement("span",{className:x},"Error fetching schema for ",n.type);var k=E&&E.length;return ae.a.createElement("details",{className:"action border rounded-1 border-gray-light",open:s},ae.a.createElement("summary",{className:"".concat(k?"bg-red-light":"bg-gray"," py-1 px-2 text-mono border-gray-light")},a,": ",n.type,k&&ae.a.createElement("span",{className:"Counter Counter--gray ml-2"},E.length)),ae.a.createElement("div",{className:"p-3"},E,f.description&&ae.a.createElement("p",{className:"mb-3"},f.description),Object.keys(f.keys).map(function(e){var o="".concat(r,".").concat(a,".").concat(e),s=f.keys[e];return ae.a.createElement(Te,{key:e,action:n,name:o,option:s,optionKey:e,value:n[e],openFile:d,stepIndex:t,addAction:c,removeAction:i,fetchSchema:l,error:u})}),ae.a.createElement(Oe,{label:"Store",name:"".concat(r,".").concat(a,".store"),optionKey:"store",value:n.store,description:ae.a.createElement("span",null,ae.a.createElement("code",null,"store")," lets you store information from this action and use it later."," ",ae.a.createElement("a",{href:"https://lab.github.com/docs/using-actions#storing-information"},"Learn more."))}),ae.a.createElement("div",{className:"d-flex text-small"},ae.a.createElement("button",{type:"button",className:"btn-link mr-3",onClick:function(){return i(r,a)}},"Remove action"),ae.a.createElement("a",{href:"/docs/actions/".concat(n.type),target:"_blank",rel:"noopener noreferrer"},"Docs for ",n.type," ",ae.a.createElement(ke.k,{size:12,icon:ke.f})))))}var De=ae.a.createContext();function Me(e){var t=e.addAction,n=e.basename,a=Object(ne.useRef)(null);var r=Object(ne.useContext)(De);return ae.a.createElement("details",{className:"position-relative select-menu details-reset details-overlay",ref:a},ae.a.createElement("summary",{className:"mb-3 btn btn-primary select-menu-button"},ae.a.createElement("span",{className:"mr-1"},"Add an action")),ae.a.createElement("div",{className:"text-mono dropdown-menu dropdown-menu-ne",style:{width:300,height:500}},ae.a.createElement("ul",{className:"overflow-auto height-full"},r.actions.map(function(e){return ae.a.createElement("li",{key:e,className:"Box-row p-0"},ae.a.createElement("button",{className:"py-2 px-3 btn-link d-block dropdown-item",type:"button",onClick:function(){a.current.removeAttribute("open"),t(n,e)}},e))}))))}function Be(e){var t=e.stepIndex,n=e.actions,a=e.addAction,r=e.removeAction,o=e.basename,s=e.legend,c=void 0===s?"Actions":s,i=e.fetchSchema,l=e.error,u=e.openFile,d=(Array.isArray(n)?n:[n]).filter(Boolean);return ae.a.createElement("fieldset",{className:"border-top"},ae.a.createElement("legend",{className:"text-bold my-3 pr-3"},c),ae.a.createElement("ol",{className:"list-style-none"},d.map(function(e,n){return ae.a.createElement("li",{key:"".concat(t,":").concat(n),className:"mb-3"},ae.a.createElement(ze,{basename:o,addAction:a,removeAction:r,stepIndex:t,action:e,actionIndex:n,fetchSchema:i,error:l,openFile:u}))})),ae.a.createElement(Me,{addAction:a,basename:o}))}var Ie=ae.a.createContext();var _e=ae.a.createContext();function We(e){var t=e.step,n=e.index,a=e.removeStep,r=e.addAction,o=e.removeAction,s=e.fetchSchema,c=e.error,i=e.isOpen,l=void 0!==i&&i,u=e.openFile;if(!t)return null;var d=Object(ne.useContext)(Ie).events,m=Object(ne.useContext)(_e).course,p=m&&"nested"===m.type,f=c&&c.details?c.details.filter(function(e){return"steps"===e.path[0]&&e.path[1]===n}):[];return ae.a.createElement("details",{className:"Box ".concat(f.length?"Box--danger":""),open:l},ae.a.createElement("summary",{className:"Box-header p-2 text-bold f4 ".concat(f.length?"Box--danger bg-red-light":""),style:{borderBottom:"none"}},t.title||"Untitled step"," ",f.length?ae.a.createElement("span",{className:"Counter Counter--gray"},f.length):null),ae.a.createElement("fieldset",{className:"Box-body border-top p-0"},ae.a.createElement("div",{className:"pt-3 px-3 pb-1"},p&&ae.a.createElement(Se,{label:"Course",name:"steps.".concat(n,".course"),description:"The owner/name of a Learning Lab course",placeholder:"githubtraining/introduction-to-github",value:t.course}),ae.a.createElement(Se,{label:"Step title",name:"steps.".concat(n,".title"),value:t.title,required:!p}),ae.a.createElement(Se,{label:"Step description",name:"steps.".concat(n,".description"),value:t.description,required:!p}),ae.a.createElement(Se,{label:"Step button link",type:"url",name:"steps.".concat(n,".link"),value:t.link}),ae.a.createElement(Se,{label:"Step video",description:"An optional YouTube or Vimeo embeddable video URL.",type:"text",name:"steps.".concat(n,".video"),value:t.video,placeholder:"https://youtube.com/embed/w3jLJU7DT5E"}),!p&&ae.a.createElement(ae.a.Fragment,null,d?ae.a.createElement(qe,{label:"Event trigger",description:ae.a.createElement(ae.a.Fragment,null,"Run this step's actions when this event is triggered in the user's repository. ",ae.a.createElement("a",{href:"https://developer.github.com/v3/activity/events/types/"},"See available events.")),name:"steps.".concat(n,".event"),value:t.event,options:d,required:!0}):ae.a.createElement("span",null,"Fetching list of events..."),ae.a.createElement(Be,{addAction:r,removeAction:o,stepIndex:n,actions:t.actions,basename:"steps.".concat(n,".actions"),fetchSchema:s,error:c,openFile:u}))),ae.a.createElement("div",{className:"px-3 py-2 border-top text-small"},ae.a.createElement("button",{className:"btn-link",type:"button",onClick:function(){return a(n)}},"Remove step"))))}var Ue=n(170),Je=ae.a.lazy(function(){return n.e(3).then(n.t.bind(null,541,7))});function He(e){var t,n=e.value,a=e.onChange,r=e.path;r.endsWith(".yml")?t="yaml":r.endsWith(".md")&&(t="markdown");var o="border rounded-1 flex-auto height-full";"config.yml"===r&&(o+=" rounded-top-0");var s=Object(ne.useRef)(null);return ae.a.createElement("div",{className:o},ae.a.createElement(Ue.a,{handleWidth:!0,handleHeight:!0,refreshMode:"debounce",refreshRate:100,onResize:function(){s.current&&s.current.layout()}},ae.a.createElement(ne.Suspense,{fallback:ae.a.createElement("div",{className:"p-3 text-gray"},"Loading editor...")},ae.a.createElement(Je,{language:t,value:n,options:{minimap:{enabled:!1},wordWrap:"on"},onChange:a,editorDidMount:function(e){s.current=e,s.current.focus()}}))))}function Ke(e){var t=e.json,n=e.addAction,a=e.removeAction,r=e.fetchSchema,o=e.error,s=e.openFile,c=Object(ne.useContext)(_e).course,i=o&&o.details?o.details.filter(function(e){return"before"===e.path[0]}):[];return ae.a.createElement("details",{className:"Box ".concat(i.length?"Box--danger":""),open:!0},ae.a.createElement("summary",{className:"Box-header p-2 text-bold f4 ".concat(i.length?"Box--danger bg-red-light":""),style:{borderBottom:"none"}},"Course information ",i.length?ae.a.createElement("span",{className:"Counter Counter--gray"},i.length):null),ae.a.createElement("div",{className:"Box-body border-top mb-0"},ae.a.createElement(Se,{label:"Title",name:"title",value:t.title,required:!0}),ae.a.createElement(Se,{label:"Description",name:"description",value:t.description,required:!0}),c&&"repo"===c.type&&ae.a.createElement(Ce,{legend:"Template",description:"Information about the template repository"},ae.a.createElement(Se,{label:"Repository to copy",description:"When a user registers for the course, create this repository for them.",name:"template.repo",value:t.template?t.template.repo:"",required:!0}),ae.a.createElement(Se,{label:"Name of repository to be created on user account",description:"When creating a new repository for the user, what should it be named?",name:"template.name",value:t.template?t.template.name:"",required:!0}),ae.a.createElement(Se,{label:"Repository description",description:"The description of the repository that will be created.",name:"template.description",value:t.template?t.template.description:"",required:!0})),ae.a.createElement(Ae,{label:"Tags",name:"tags",optionKey:"tags",value:t.tags}),c&&"repo"===c.type&&ae.a.createElement(Be,{legend:"Actions when the repository is created",addAction:n,removeAction:a,stepIndex:0,actions:t.before,basename:"before",fetchSchema:r,error:o,openFile:s})))}function Ve(e){var t,n=e.validate,a=e.error;return t=void 0===a?null:a?ae.a.createElement("span",{className:"text-red"},ae.a.createElement(ke.k,{icon:ke.j})," ",ae.a.createElement("span",null,a.details&&a.details.length)," error",a.details&&a.details.length>1?"s":""):ae.a.createElement("span",{className:"text-green"},ae.a.createElement(ke.k,{icon:ke.c})," Success!"),ae.a.createElement("div",{className:"p-2 border-top border-left border-right rounded-1 rounded-bottom-0 bg-gray"},ae.a.createElement("div",{className:"d-flex flex-items-center"},ae.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:n},"Validate"),ae.a.createElement("div",{className:"text-small ml-2"},t)),a&&ae.a.createElement(Pe,{error:a}))}function Ye(){var e=Object(ne.useContext)(_e).course;return Object(ne.useMemo)(function(){return e?ae.a.createElement(ae.a.Fragment,null,"published"===e.state&&!e.draft&&ae.a.createElement("p",{className:"flash flash-warn d-flex mb-3"},ae.a.createElement("span",{className:"height-full mr-1"},ae.a.createElement(ke.k,{icon:ke.a,size:14})),"You're about to commit to a published course!"),ae.a.createElement("input",{className:"btn btn-block btn-primary btn-sm",type:"submit",value:"Commit to ".concat(e.branch||e.default_branch)})):ae.a.createElement("input",{className:"btn btn-block btn-primary btn-sm",type:"submit",disabled:!0,value:"Commit"})},[e])}function Ge(e){var t=e.files,n=e.commitChanges,a=Object(ne.useState)(null),r=A()(a,2),o=r[0],s=r[1],c=Object(ne.useState)(!1),i=A()(c,2),l=i[0],u=i[1];Object(ne.useEffect)(function(){o&&s(null)},[t]);var d=Object(ne.useRef)(null),m=Object(ne.useContext)(_e),p=m.course,h=m.setCourse;function b(){return(b=v()(f.a.mark(function e(t,a){var r,o,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),r=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e.next=5,fetch("".concat(location.pathname,"/commit"),{method:"POST",body:JSON.stringify({files:a,message:d.current.value,oid:p.sha}),headers:{"Content-Type":"application/json","CSRF-Token":r}});case 5:return o=e.sent,e.next=8,o.json();case 8:(c=e.sent).success&&(h(ie()({},p,{sha:c.oid})),n()),s(c),u(!1);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.addEventListener("beforeunload",function(e){t.filter(function(e){return e.isChanged}).length>0&&(e.preventDefault(),e.returnValue="")});var y=t.filter(function(e){return e.isChanged});return Object(ne.useMemo)(function(){if(null!==o){var e=o.success?"Success! Your changes have been pushed.":o.message;return ae.a.createElement("p",{className:"flash flash-".concat(o.success?"success":"error")},e)}return l?ae.a.createElement("p",null,"Loading..."):0===y.length?ae.a.createElement("p",{className:"m-0"},"You don't have any changes to commit yet."):ae.a.createElement("form",{onSubmit:function(e){return function(e,t){return b.apply(this,arguments)}(e,y)}},ae.a.createElement("p",{className:"text-small text-gray mb-1"},ae.a.createElement(ke.k,{icon:ke.h,className:"bg-yellow-dark v-align-middle",size:10})," ",y.length," changed file(s)"),ae.a.createElement("textarea",{className:"text-mono text-small width-full form-control mb-3",ref:d,placeholder:"Add a commit message..."}),ae.a.createElement(Ye,null))},[p,l,o,y,y.length])}function Qe(e){var t=e.addFileToTree,n=e.addFile,a=e.tree,r=Object(ne.useState)(!1),o=A()(r,2),s=o[0],c=o[1],i=Object(ne.useRef)();return Object(ne.useEffect)(function(){s&&i.current&&i.current.focus()},[s]),s?ae.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=i.current.value;r?a.some(function(e){return e.path===r})||(t(r),n(r),i.current.value="",c(!1)):c(!1)},className:"d-flex"},ae.a.createElement("input",{style:{minWidth:0},className:"form-control input-sm rounded-right-0 border-right-0",placeholder:"responses/my-file.md",type:"text",ref:i,required:!0}),ae.a.createElement("input",{className:"btn btn-sm BtnGroup-item",type:"submit",value:"Add file"})):ae.a.createElement("button",{className:"btn btn-sm",onClick:function(){return c(!0)}},"Add file")}function Xe(e){var t=e.tree,n=e.currentFile,a=e.nested,r=void 0===a?0:a,o=e.openFile,s="text-gray-light py-1 px-2 text-small filter-item btn-link width-full text-left";return ae.a.createElement("ul",{className:"list-style-none pt-0",style:{paddingLeft:10*r}},t.map(function(e){var t=e.path.split("/"),a=t[t.length-1];if("blob"===e.type){var c=s;return n===e.path&&(c+=" selected"),ae.a.createElement("li",{key:e.path},ae.a.createElement("button",{className:c,onClick:function(){return o(e.path)}},a))}return"tree"===e.type?ae.a.createElement(ae.a.Fragment,{key:e.path},ae.a.createElement("li",null,ae.a.createElement("details",{open:e.children.some(function(e){return n.startsWith(e.path)})},ae.a.createElement("summary",{className:s},a),ae.a.createElement(Xe,{tree:e.children,nested:r+1,currentFile:n,openFile:o})))):null}))}function Ze(e){var t=e.files,n=e.currentFile,a=e.addFile,r=e.openFile,o=e.commitChanges,s=Object(ne.useContext)(Le),c=s.tree,i=s.addFileToTree,l=s.loading,u=t.filter(function(e){return e.isChanged}).length,d=function(e){return function e(t,n){var a=[],r=!0,o=!1,s=void 0;try{for(var c,i=function(){var r=c.value,o=r.path.split("/");if("blob"===r.type&&(1===o.length||n&&r.path==="".concat(n,"/").concat(o[o.length-1])))return a.push(r),"continue";if("tree"===r.type&&(1===o.length||n)){var s=t.filter(function(e){return e.path.startsWith(r.path)&&e.path!==r.path});a.push(ie()({},r,{children:e(s,r.path)}))}},l=t[Symbol.iterator]();!(r=(c=l.next()).done);r=!0)i()}catch(e){o=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return a}(e)}(c);return Object(ne.useMemo)(function(){if(l){var e=ae.a.createElement("div",{className:"text-small py-1 px-2 filter-item d-block anim-pulse border"},"Â ");return ae.a.createElement("div",{className:"height-full d-flex flex-column"},ae.a.createElement("div",{className:"p-3 file-tree filter-list flex-auto overflow-auto"},e,e,e))}return ae.a.createElement("div",{className:"height-full d-flex flex-column anim-fade-in anim-fast"},ae.a.createElement("div",{className:"p-3 file-tree filter-list flex-auto overflow-auto"},ae.a.createElement(Xe,{tree:d,currentFile:n,openFile:r}),ae.a.createElement(Qe,{tree:c,addFileToTree:i,addFile:a})),ae.a.createElement("div",{className:"text-small text-gray mt-3 p-3 border-top"},ae.a.createElement(Ge,{files:t,numChangedFiles:u,commitChanges:o})))},[l,t,n,c.length,u])}var $e={pending:"Label--orange",published:"bg-green",disabled:"Label--gray-darker"};function et(e){var t=e.course,n=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}(t.state),a=$e[t.state];return ae.a.createElement("span",{className:"ml-2 Label ".concat(a)},n)}var tt=n(150),nt=n.n(tt);function at(e){var t=e.course,n=Object(ne.useState)(null),a=A()(n,2),r=a[0],o=a[1],s=Object(ne.useRef)(null),c=Object(ne.useState)(!1),i=A()(c,2),l=i[0],u=i[1],d=Object(ne.useState)(null),m=A()(d,2),p=m[0],h=m[1],b=p&&new RegExp("^".concat(p),"i");function y(){return(y=v()(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/branches"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(Object(ne.useEffect)(function(){!function(){y.apply(this,arguments)}()},[]),!r)return null;function g(){return(g=v()(f.a.mark(function e(){var t,n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e.next=4,fetch("".concat(location.pathname,"/branch"),{method:"POST",headers:{"Content-Type":"application/json","CSRF-Token":t},body:JSON.stringify({branch:p})});case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:a=e.sent,location.replace("/".concat(a.full_name,"/admin/").concat(a.branch,"/builder")),e.next=13;break;case 12:u(!1);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}return ae.a.createElement("details",{className:"position-relative select-menu details-reset details-overlay",onToggle:function(){s.current.focus()}},ae.a.createElement("summary",{className:"text-white text-mono select-menu-button"},ae.a.createElement("span",{className:"mr-1"},t.branch||t.default_branch)),ae.a.createElement("div",{className:"dropdown-menu dropdown-menu-se mt-2 d-flex flex-column",style:{width:240,maxHeight:400}},ae.a.createElement("div",{className:"px-2 pt-1 pb-2 border-bottom"},ae.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){g.apply(this,arguments)}(p)}},ae.a.createElement("input",{ref:s,className:"form-control width-full input-sm",placeholder:"Find or create a branch",onChange:function(e){return h(e.target.value)}}),p&&ae.a.createElement("button",{type:"submit",disabled:l,className:"btn btn-block btn-primary btn-sm mt-2"},"Create branch ",nt()(p)),l&&ae.a.createElement("div",{className:"loader-bar"}))),ae.a.createElement("ul",{className:"text-mono overflow-auto height-full flex-auto"},r.filter(function(e){return!p||b.test(e)}).map(function(e){return ae.a.createElement("li",{key:e,className:"Box-row p-0"},ae.a.createElement("a",{href:"/".concat(t.full_name,"/admin/").concat(e===t.default_branch?"":"".concat(e,"/"),"builder"),className:"py-2 px-3 btn-link d-block dropdown-item ".concat(e===t.branch?"selected":"")},e))}))))}function rt(){var e=Object(ne.useContext)(_e).course;return Object(ne.useMemo)(function(){return ae.a.createElement("header",{className:"py-3 p-responsive bg-gray-dark text-gray d-flex flex-items-center"},ae.a.createElement("a",{href:"/",className:"text-white d-flex flex-items-center"},ae.a.createElement(ke.k,{icon:ke.g,size:28}),ae.a.createElement("span",{className:"ml-2"},"Learning Lab")),e?ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("span",{className:"mx-3"},"|"),ae.a.createElement(ke.k,{icon:ke.b,className:"mr-2"}),ae.a.createElement("a",{className:"text-white",href:"/".concat(e.full_name,"/admin")},e.full_name),ae.a.createElement(et,{course:e}),ae.a.createElement(ke.k,{icon:ke.d,className:"mx-3"}),ae.a.createElement(ke.k,{icon:ke.e,className:"mr-2"}),ae.a.createElement(at,{course:e})):ae.a.createElement("span",{className:"ml-3 text-white"},"Loading..."),ae.a.createElement("div",{style:{marginLeft:"auto"}},ae.a.createElement("span",{className:"mr-3 Label Label--outline border-green text-white tooltipped tooltipped-multiline tooltipped-sw","aria-label":"The Course Builder UI is currently in beta. We would love your feedback! Email learninglab@github.com."},"Beta"),ae.a.createElement("a",{href:"/".concat(e?e.full_name:"","/admin"),className:"text-white"},ae.a.createElement(ke.k,{icon:ke.i,className:"v-align-middle mr-1"}),"Exit")))},[e])}function ot(){var e=Object(ne.useContext)(_e).course;return ae.a.createElement("div",{className:"d-flex height-full flex-column flex-items-center flex-justify-center blankslate"},ae.a.createElement(ke.k,{size:32,icon:ke.a,className:"blankslate-icon mb-3"}),ae.a.createElement("h3",{className:"mb-1"},"There was an error while loading your course repo's contents."),e&&ae.a.createElement("p",null,"You might be able to fix it by ",ae.a.createElement("a",{href:"/".concat(e.full_name,"/admin")},"manually syncing the course"),"."))}var st=n(169),ct=Object(st.combineProviders)();ct.push(function(e){var t=e.children,n=Object(ne.useState)([]),a=A()(n,2),r=a[0],o=a[1],s=Object(ne.useState)(!0),c=A()(s,2),i=c[0],l=c[1];function u(){return(u=v()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/actions"));case 2:return t=e.sent,e.t0=o,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),l(!1);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(ne.useEffect)(function(){!function(){u.apply(this,arguments)}()},[]),ae.a.createElement(De.Provider,{value:{actions:r,loading:i}},t)}),ct.push(function(e){var t=e.children,n=Object(ne.useState)([]),a=A()(n,2),r=a[0],o=a[1],s=Object(ne.useState)(!0),c=A()(s,2),i=c[0],l=c[1];function u(){return(u=v()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/tree"));case 2:return t=e.sent,e.t0=o,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),l(!1);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(ne.useEffect)(function(){!function(){u.apply(this,arguments)}()},[]),ae.a.createElement(Le.Provider,{value:{tree:r,addFileToTree:function(e){var t=e.split("/"),n=t.map(function(e,n,a){var o=t.slice(0,n+1).join("/");return r.some(function(e){return e.path===o})?null:n===a.length-1?{path:o,type:"blob"}:{path:o,type:"tree"}}).filter(Boolean);o([].concat(w()(r),w()(n)))},loading:i}},t)}),ct.push(function(e){var t=e.children,n=Object(ne.useState)(null),a=A()(n,2),r=a[0],o=a[1];function s(){return(s=v()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/course"));case 2:return t=e.sent,e.t0=o,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(ne.useEffect)(function(){!function(){s.apply(this,arguments)}()},[]),ae.a.createElement(_e.Provider,{value:{course:r,setCourse:o}},t)}),ct.push(function(e){var t=e.children,n=Object(ne.useState)(null),a=A()(n,2),r=a[0],o=a[1];function s(){return(s=v()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/events"));case 2:return t=e.sent,e.t0=o,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(ne.useEffect)(function(){!function(){s.apply(this,arguments)}()},[]);var c=[];if(r){var i=function(e){c.push(e);var t=r[e].map(function(t){return"".concat(e,".").concat(t)});c.push.apply(c,w()(t))};for(var l in r)i(l)}return ae.a.createElement(Ie.Provider,{value:{events:c}},t)});var it=ct.master(),lt=n(151),ut=n.n(lt),dt=function(e){function t(e){var n;return ue()(this,t),(n=fe()(this,ve()(t).call(this,e))).state={json:{},loading:!0,error:void 0,schemas:{},currentFile:null,files:[],editorIsLoading:!1,couldNotLoadConfig:!1},n.updateCodeState=n.updateCodeState.bind(ye()(n)),n.onCodeEditorChange=n.onCodeEditorChange.bind(ye()(n)),n.handleFormChange=n.handleFormChange.bind(ye()(n)),n.addStep=n.addStep.bind(ye()(n)),n.removeStep=n.removeStep.bind(ye()(n)),n.addAction=n.addAction.bind(ye()(n)),n.removeAction=n.removeAction.bind(ye()(n)),n.fetchSchema=n.fetchSchema.bind(ye()(n)),n.validate=n.validate.bind(ye()(n)),n.openFile=n.openFile.bind(ye()(n)),n.addFile=n.addFile.bind(ye()(n)),n.commitChanges=n.commitChanges.bind(ye()(n)),n}return Ee()(t,e),me()(t,[{key:"updateCodeState",value:function(e){var t=this.state.files,n=t.findIndex(function(e){return"config.yml"===e.path});this.setState({json:e,files:[].concat(w()(t.slice(0,n)),[ie()({},t[n],{isChanged:!0,content:ut.a.safeDump(e,{noRefs:!0})})],w()(t.slice(n+1)))})}},{key:"componentDidMount",value:function(){var e=v()(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(location.pathname,"/file?p=config.yml"));case 2:if((t=e.sent).ok){e.next=6;break}return this.setState({loading:!1,couldNotLoadConfig:!0}),e.abrupt("return");case 6:return e.next=8,t.text();case 8:n=e.sent,this.setState({files:[{path:"config.yml",isChanged:!1,content:n,originalContent:n}],json:ut.a.safeLoad(n),loading:!1,currentFile:0});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFile",value:function(e){this.setState({currentFile:this.state.files.length,files:[].concat(w()(this.state.files),[{path:e,isChanged:!0,content:""}])})}},{key:"openFile",value:function(){var e=v()(f.a.mark(function e(t){var n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=this.state.files.findIndex(function(e){return e.path===t}))>-1)){e.next=5;break}return e.abrupt("return",this.setState({currentFile:n,editorIsLoading:!1}));case 5:this.setState({editorIsLoading:!0});case 6:return e.next=8,fetch("".concat(location.pathname,"/file?p=").concat(t));case 8:if(!(a=e.sent).ok){e.next=16;break}return e.next=12,a.text();case 12:r=e.sent,this.setState({currentFile:this.state.files.length,files:[].concat(w()(this.state.files),[{isChanged:!1,path:t,content:r,originalContent:r}]),editorIsLoading:!1}),e.next=18;break;case 16:this.setState({editorIsLoading:!1}),console.error(a.status);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSchema",value:function(){var e=v()(f.a.mark(function e(t){var n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.state.schemas[t])){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,fetch("".concat(location.pathname,"/actions/").concat(t));case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,this.setState({schemas:ie()({},this.state.schemas,se()({},t,r))}),e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onCodeEditorChange",value:function(e){var t=this.state,n=t.currentFile,a=t.files,r={files:[].concat(w()(a.slice(0,n)),[ie()({},a[n],{isChanged:a[n].originalContent!==e,content:e})],w()(a.slice(n+1)))};if("config.yml"===a[n].path)if(e&&e.trim())try{r.json=ut.a.safeLoad(e)}catch(e){}else r.json={};this.setState(r)}},{key:"commitChanges",value:function(){var e=this.state.files.map(function(e){return ie()({},e,{originalContent:e.content,isChanged:!1})});this.setState({files:e})}},{key:"handleFormChange",value:function(e){var t=e.target,n=t.value,a=t.name;"checkbox"===e.target.type&&(n=e.target.checked);var r=xe.a.set(this.state.json,a,n);this.updateCodeState(r)}},{key:"addStep",value:function(){this.setState({addingStep:!0});var e=xe.a.push(this.state.json,"steps",{title:"New step",actions:[{type:"createIssue",title:"A new issue",body:"a-response-file.md"}]});this.updateCodeState(e)}},{key:"removeStep",value:function(e){if(confirm("Are you sure you want to remove this step?")){var t=xe.a.del(this.state.json,["steps",e]);this.updateCodeState(t)}}},{key:"addAction",value:function(e,t){var n=xe.a.push(this.state.json,e,{type:t});this.updateCodeState(n)}},{key:"removeAction",value:function(e,t){if(confirm("Are you sure you want to remove this action?")){var n=xe.a.del(this.state.json,[e,t].join("."));this.updateCodeState(n)}}},{key:"validate",value:function(){var e=v()(f.a.mark(function e(){var t,n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=this.state.files.find(function(e){return"config.yml"===e.path}),e.next=4,fetch("".concat(location.pathname,"/validate"),{method:"PUT",body:JSON.stringify({input:n.content}),headers:{"Content-Type":"application/json","CSRF-Token":t}});case 4:if((a=e.sent).ok){e.next=12;break}return e.t0=this,e.next=9,a.text();case 9:return e.t1=e.sent,e.t2={error:e.t1},e.abrupt("return",e.t0.setState.call(e.t0,e.t2));case 12:return e.next=14,a.json();case 14:(r=e.sent).error?this.setState({error:r.error}):this.setState({error:null});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state,a=n.json,r=n.loading,o=n.error,s=n.currentFile,c=n.files,i=n.editorIsLoading,l=n.addingStep,u=n.couldNotLoadConfig;return r?ae.a.createElement("div",{className:"d-flex height-full flex-column flex-items-center flex-justify-center"},ae.a.createElement(ke.k,{size:50,icon:ke.g,className:"anim-pulse"})):u?ae.a.createElement(it,null,ae.a.createElement(ot,null)):(e=i?"Loading...":c[s].content,ae.a.createElement(it,null,ae.a.createElement("div",{className:"d-flex flex-column height-full"},ae.a.createElement(rt,null),ae.a.createElement("div",{className:"d-flex flex-auto overflow-auto height-full"},ae.a.createElement("div",{style:{maxWidth:260,flexShrink:0,flexBasis:"100%"},className:"col-3 border-right bg-gray height-full overflow-auto"},ae.a.createElement(Ze,{files:c,addFile:this.addFile,currentFile:c[s].path,openFile:this.openFile,commitChanges:this.commitChanges})),ae.a.createElement("div",{className:"flex-auto col-5"},ae.a.createElement("div",{className:"p-3 height-full d-flex flex-column"},"config.yml"===c[s].path&&ae.a.createElement(Ve,{validate:this.validate,error:o}),ae.a.createElement(He,{path:c[s].path,value:e,onChange:this.onCodeEditorChange,validate:this.validate}))),ae.a.createElement("aside",{className:"flex-auto col-4 bg-gray border-left height-full overflow-auto"},ae.a.createElement("form",{onChange:this.handleFormChange,className:"p-3"},ae.a.createElement(Ke,{json:a,addAction:this.addAction,removeAction:this.removeAction,fetchSchema:this.fetchSchema,error:o,openFile:this.openFile}),a.steps&&Array.isArray(a.steps)&&a.steps.length?ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("h4",{className:"my-3"},"Steps"),ae.a.createElement("ol",{className:"list-style-none"},a.steps.map(function(e,n){return ae.a.createElement("li",{key:"steps:".concat(n),className:"mb-3"},ae.a.createElement(We,{step:e,index:n,removeStep:t.removeStep,addAction:t.addAction,removeAction:t.removeAction,fetchSchema:t.fetchSchema,error:o,isOpen:l&&n===a.steps.length-1,openFile:t.openFile}))}),ae.a.createElement("button",{onClick:this.addStep,type:"button",className:"btn btn-primary"},"Add a step"))):ae.a.createElement("div",{className:"mt-3 rounded-2 border-gray-light border-dashed p-5 text-center"},ae.a.createElement("h4",null,"Steps are what define the process of your course."),ae.a.createElement("button",{onClick:this.addStep,type:"button",className:"mt-3 btn btn-primary"},"Create the first step"))))))))}}]),t}(ne.Component),mt=document.querySelector(".js-mount-course-builder");mt&&Object(re.render)(ae.a.createElement(dt,null),mt);var pt=n(155),ft=n.n(pt),ht=n(152);function vt(){var e=ft()(["\n    This will create the following repo: <strong>","-path</strong>\n  "]);return vt=function(){return e},e}function bt(){var e=ft()(["\n    This will create the following repos: <strong>","-course</strong> and <strong>","-template</strong>\n  "]);return bt=function(){return e},e}var yt=document.querySelector(".js-create-course-builder-form"),gt=document.querySelector(".js-create-course-console");var Et={repo:function(e){return Object(ht.a)(bt(),e,e)},nested:function(e){return Object(ht.a)(vt(),e)}};function jt(e){var t="",n=yt.querySelector(".js-create-course-repo-hint"),a=e.trim();if(a){var r=nt()(a,{lower:!0}),o=function(){var e=yt.querySelector('input[name="type"]:checked');return e&&e.value}();t=Et[o||"repo"](r)}Object(ht.b)(t,n)}if(yt){var xt=Array.from(yt.querySelectorAll('.select-menu input[type="radio"]')),kt=Array.from(yt.querySelectorAll('input[type="radio"][name="type"]')),St=yt.querySelector(".js-create-course-visibility-picker"),wt=yt.querySelector(".js-create-course-public-only"),Nt=yt.querySelector(".js-menu-target"),Ct=yt.querySelector("input#title");Ct.addEventListener("keyup",function(e){jt(e.target.value)}),kt.forEach(function(e){e.addEventListener("change",function(e){e.target.checked&&jt(Ct.value)})}),xt.forEach(function(e){e.addEventListener("change",function(){var e=v()(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,a=t.target.parentElement.querySelector(".avatar").getAttribute("src"),Nt.querySelector("span").textContent=n,Nt.querySelector("img").setAttribute("src",a),Nt.closest(".js-course-owner-select-menu").removeAttribute("open"),e.next=7,fetch("/new/private-courses/".concat(n));case 7:e.sent.ok?(St.style.display="block",wt.style.display="none"):(St.style.display="none",wt.style.display="block");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),yt.addEventListener("submit",function(){var e=v()(f.a.mark(function e(t){var n,s,c,l,u,d;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=yt.querySelector('input[type="submit"]')).setAttribute("disabled",!0),s=Object(r.a)(),new Y.a(s,gt).start(),i.a.on("console-end",function(e){var t=e.success,n=e.course;t&&window.location.replace("/".concat(n,"/admin/builder"))}),c={title:Ct.value,description:yt.querySelector("textarea#description").value,owner:xt.find(function(e){return e.checked}).value},(l=yt.querySelector('input[name="visibility"]:checked'))&&(c.visibility=l.value),(u=yt.querySelector('input[name="type"]:checked'))&&(c.type=u.value),e.prev=12,e.next=15,fetch("/new",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","CSRF-Token":Object(a.a)()},body:JSON.stringify(c)}).then(function(e){return e.json()});case 15:d=e.sent,n.removeAttribute("disabled"),d.success||(s.deleteSelf(),Object(o.default)({style:"error",body:d.message})),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(12),s.deleteSelf(),n.removeAttribute("disabled"),Object(o.default)({style:"error",body:e.t0.message});case 25:case"end":return e.stop()}},e,null,[[12,20]])}));return function(t){return e.apply(this,arguments)}}())}var Ot=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),At=document.querySelectorAll(".js-delete-token-form");At&&At.forEach(function(e){e.addEventListener("submit",function(){var t=v()(f.a.mark(function t(n){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Lt("delete",e.dataset.tokenId);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())});var qt=document.querySelector("#js-form-new-token");function Lt(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=v()(f.a.mark(function e(t,n){var a,r,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"create"===t?(a={note:n},r="POST",s="new"):(a={id:n},r="DELETE",s="delete"),e.next=3,fetch("/settings/tokens/".concat(s),{body:JSON.stringify(a),headers:{"CSRF-Token":Ot,"content-type":"application/json"},credentials:"same-origin",method:r});case 3:e.sent.ok?window.location.reload():Object(o.default)({body:"An error occurred and your token was not ".concat(t,"d."),style:"error"});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}qt&&qt.addEventListener("submit",function(){var e=v()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Lt("create",qt.querySelector('input[name="note"]').value);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());n(243);var Ft=document.querySelector(".js-nav-account-button");Ft&&Ft.addEventListener("click",function(){var e=document.querySelector(".js-nav-account-popover"),t=document.querySelector(".js-nav-account-overlay");e.style.display="block",t.style.display="block",Ft.setAttribute("aria-expanded",!0),t.addEventListener("click",function(){e.style.display="none",t.style.display="none",Ft.setAttribute("aria-expanded",!1)})})},3:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n.n(a),o=n(11),s=n.n(o),c=n(12),i=n.n(c),l=function(){function e(t){if(s()(this,e),!t.body)throw new Error("This flash must have a body");var n={style:"info",close:!0,onClose:function(e){return e},wrapper:document.querySelector(".flash-wrapper")};this.opts=r()({},n,t),this.addToDOM()}return i()(e,[{key:"addToDOM",value:function(){var e=this.opts,t=e.style,n=e.close,a=e.wrapper,r=e.body,o=document.createElement("div");o.classList.add("flash","flash-full","flash-".concat(t)),o.innerHTML='<div class="container-lg p-responsive">'.concat(r," ").concat(n?'<button class="flash-close js-flash-close" type="button">\n  <svg height="16" class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"></path></svg>\n</button>':"","</div>"),a.appendChild(o),this.opts.close&&this.registerCloseListener(o)}},{key:"registerCloseListener",value:function(e){var t=this;e.querySelector(".js-flash-close").addEventListener("click",function(){t.opts.onClose(),t.clearDOMNode()})}},{key:"clearDOMNode",value:function(){this.opts.wrapper.innerHTML=""}}]),e}();t.default=function(e){return new l(e)}},8:function(e,t,n){"use strict";var a=n(11),r=n.n(a),o=n(12),s=n.n(o),c=function(){function e(t){if(r()(this,e),t)this.DOMElement=t;else{var n=document.createElement("div");n.classList.add("loader-bar"),document.body.appendChild(n),this.DOMElement=n}}return s()(e,[{key:"deleteSelf",value:function(){this.DOMElement.parentNode.removeChild(this.DOMElement)}}]),e}();t.a=function(e){return new c(e)}},9:function(e,t,n){"use strict";function a(){return document.querySelector('meta[name="csrf-token"]').getAttribute("content")}n.d(t,"a",function(){return a})}});
//# sourceMappingURL=main.495cfab4e4da2795b03b.js.map